---
sidebar: sidebar 
permalink: task-managing-relationships.html 
keywords: sync, immediate, now, schedule, minutes, hours, on, off, delete, group, accelerate, accelerating, grouping, multiple data brokers, sync now, turn off, turn on, sync schedule, settings, change settings, recently modified files, delete files on target, retries, retry, file types, exclude file type, include file type, delete relationship 
summary: Vous pouvez gérer les relations de synchronisation à tout moment en synchronisant immédiatement les données, en modifiant les horaires, etc. 
---
= Gestion des relations de synchronisation dans NetApp Copy and Sync
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Vous pouvez gérer les relations de synchronisation dans NetApp Copy and Sync à tout moment en synchronisant immédiatement les données, en modifiant les planifications, etc.



== Effectuer une synchronisation immédiate des données

Plutôt que d’attendre la prochaine synchronisation planifiée, vous pouvez immédiatement synchroniser les données entre la source et la cible.

.Étapes
. link:task-login-copyandsync.html["Connectez-vous pour copier et synchroniser"] .
. Depuis le *Tableau de bord*, accédez à la relation de synchronisation et sélectionnezimage:icon-sync-action.png["Une capture d'écran du bouton qui vous permet d'effectuer des actions sur une relation de synchronisation"]
. Sélectionnez *Synchroniser maintenant*, puis sélectionnez *Synchroniser* pour confirmer.


.Résultat
Copier et synchroniser démarre le processus de synchronisation des données pour la relation.



== Accélérer les performances de synchronisation

Accélérez les performances d’une relation de synchronisation en ajoutant un courtier de données supplémentaire au groupe qui gère la relation.  Le courtier de données supplémentaire doit être un _nouveau_ courtier de données.

.Comment cela fonctionne
Si le groupe de courtiers de données gère d’autres relations de synchronisation, le nouveau courtier de données que vous ajoutez au groupe accélère également les performances de ces relations de synchronisation.

Par exemple, disons que vous avez trois relations :

* La relation 1 est gérée par le groupe de courtiers de données A
* La relation 2 est gérée par le groupe de courtiers de données B
* La relation 3 est gérée par le groupe de courtiers en données A


Vous souhaitez accélérer les performances de la relation 1, vous ajoutez donc un nouveau courtier de données au groupe de courtiers de données A. Étant donné que le groupe A gère également la relation de synchronisation 3, les performances de synchronisation de la relation sont également automatiquement accélérées.

.Étapes
. Assurez-vous qu’au moins un des courtiers de données existants dans la relation est en ligne.
. Depuis le *Tableau de bord*, accédez à la relation de synchronisation et sélectionnezimage:icon-sync-action.png["Une capture d'écran du bouton qui vous permet d'effectuer des actions sur une relation de synchronisation"]
. Sélectionnez *Accélérer*.
. Suivez les instructions pour créer un nouveau courtier de données.


.Résultat
Copy and Sync ajoute le nouveau courtier de données au groupe.  Les performances de la prochaine synchronisation des données devraient être accélérées.



== Mettre à jour les informations d'identification

Vous pouvez mettre à jour le courtier de données avec les dernières informations d'identification de la source ou de la cible dans une relation de synchronisation existante.  La mise à jour des informations d’identification peut être utile si vos politiques de sécurité exigent que vous mettiez à jour les informations d’identification régulièrement.

La mise à jour des informations d’identification est prise en charge avec toute source ou cible pour laquelle Copy and Sync requiert des informations d’identification : serveurs Azure Blob, Box, IBM Cloud Object Storage, StorageGRID, ONTAP S3 Storage, SFTP et SMB.

.Étapes
. Depuis le *Tableau de bord de synchronisation*, accédez à une relation de synchronisation qui nécessite des informations d'identification, puis sélectionnez *Mettre à jour les informations d'identification*.
+
image:screenshot_sync_update_credentials.png["Une capture d’écran qui montre l’option Mettre à jour les informations d’identification sur la page Synchroniser les relations juste sous le nom de la source ou de la cible."]

. Saisissez les informations d'identification et sélectionnez *Mettre à jour*.
+
Remarque sur les serveurs SMB : si le domaine est nouveau, vous devrez le spécifier lorsque vous mettrez à jour les informations d'identification.  Si le domaine n'a pas changé, vous n'avez pas besoin de le saisir à nouveau.

+
Si vous avez saisi un domaine lors de la création de la relation de synchronisation, mais que vous n'entrez pas de nouveau domaine lorsque vous mettez à jour les informations d'identification, Copier et synchroniser continuera à utiliser le domaine d'origine que vous avez fourni.



.Résultat
La copie et la synchronisation mettent à jour les informations d'identification sur le courtier de données.  Il peut falloir jusqu'à 10 minutes avant que le courtier de données commence à utiliser les informations d'identification mises à jour pour les synchronisations de données.



== Configurer les notifications

Un paramètre *Notifications* pour chaque relation de synchronisation vous permet de choisir de recevoir ou non des notifications de copie et de synchronisation dans le centre de notifications de la console NetApp .  Vous pouvez activer les notifications pour les synchronisations de données réussies, les synchronisations de données ayant échoué et les synchronisations de données annulées.

image:https://raw.githubusercontent.com/NetAppDocs/bluexp-copy-sync/main/media/screenshot-notification-center.png["Une capture d’écran qui montre le centre de notifications dans la NetApp Console."]

De plus, vous pouvez également recevoir des notifications par email.

.Étapes
. Modifier les paramètres d’une relation de synchronisation :
+
.. Depuis le *Tableau de bord*, accédez à la relation de synchronisation et sélectionnezimage:icon-sync-action.png["Une capture d'écran du bouton qui vous permet d'effectuer des actions sur une relation de synchronisation"]
.. Sélectionnez *Paramètres*.
.. Activer les *Notifications*.
.. Sélectionnez *Enregistrer les paramètres*.


. Si vous souhaitez recevoir des notifications par e-mail, configurez les paramètres d'alerte et de notifications :
+
.. Sélectionnez *Paramètres > Paramètres d’alertes et de notifications*.
.. Sélectionnez un ou plusieurs utilisateurs et choisissez le type de notification *Info*.
.. Sélectionnez *Appliquer*.




.Résultat
Vous recevrez désormais des notifications de copie et de synchronisation dans le centre de notifications de la console NetApp , avec quelques notifications arrivant par e-mail, si vous avez configuré cette option.



== Modifier les paramètres d'une relation de synchronisation

Modifiez les paramètres qui définissent la manière dont les fichiers et dossiers sources sont synchronisés et conservés dans l’emplacement cible.

. Depuis le *Tableau de bord*, accédez à la relation de synchronisation et sélectionnezimage:icon-sync-action.png["Une capture d'écran du bouton qui vous permet d'effectuer des actions sur une relation de synchronisation"]
. Sélectionnez *Paramètres*.
. Modifiez l’un des paramètres.
+
image:screenshot_sync_settings.png["Une capture d’écran qui montre les paramètres d’une relation de synchronisation."]

+
[[deleteonsource]] Voici une brève description de chaque paramètre :

+
Calendrier:: Choisissez un calendrier récurrent pour les synchronisations futures ou désactivez le calendrier de synchronisation.  Vous pouvez planifier une relation pour synchroniser les données aussi souvent que toutes les 1 minute.
Délai de synchronisation expiré:: Définissez si la copie et la synchronisation doivent annuler une synchronisation de données si la synchronisation n'est pas terminée dans le nombre de minutes, d'heures ou de jours spécifié.
Notifications:: Vous permet de choisir de recevoir ou non des notifications de copie et de synchronisation dans le centre de notifications de la console NetApp .  Vous pouvez activer les notifications pour les synchronisations de données réussies, les synchronisations de données ayant échoué et les synchronisations de données annulées.
+
--
Si vous souhaitez recevoir des notifications pour

--
Nouvelles tentatives:: Définissez le nombre de fois que Copier et Synchroniser doivent réessayer de synchroniser un fichier avant de l'ignorer.
Comparer par:: Choisissez si Copier et Synchroniser doivent comparer certains attributs pour déterminer si un fichier ou un répertoire a changé et doit être à nouveau synchronisé.
+
--
Même si vous décochez ces attributs, Copy and Sync compare toujours la source à la cible en vérifiant les chemins, les tailles de fichiers et les noms de fichiers.  S'il y a des modifications, il synchronise ces fichiers et répertoires.

Vous pouvez choisir d'activer ou de désactiver la copie et la synchronisation en comparant les attributs suivants :

** *mtime* : L'heure de la dernière modification d'un fichier.  Cet attribut n'est pas valide pour les répertoires.
** *uid*, *gid* et *mode* : indicateurs d'autorisation pour Linux.


--
Copie pour les objets:: Vous ne pouvez pas modifier cette option après avoir créé la relation.
Fichiers récemment modifiés:: Choisissez d’exclure les fichiers qui ont été récemment modifiés avant la synchronisation planifiée.
Supprimer les fichiers sur la source:: Choisissez de supprimer les fichiers de l'emplacement source après que Copier et synchroniser ait copié les fichiers vers l'emplacement cible.  Cette option comporte un risque de perte de données car les fichiers sources sont supprimés après avoir été copiés.
+
--
Si vous activez cette option, vous devez également modifier un paramètre dans le fichier local.json sur le courtier de données.  Ouvrez le fichier et mettez-le à jour comme suit :

[source, json]
----
{
"workers":{
"transferrer":{
"delete-on-source": true
}
}
}
----
Après avoir mis à jour le fichier local.json, vous devez effectuer un redémarrage : `pm2 restart all` .

--
Supprimer les fichiers sur la cible:: Choisissez de supprimer les fichiers de l’emplacement cible, s’ils ont été supprimés de la source.  La valeur par défaut est de ne jamais supprimer les fichiers de l'emplacement cible.
Types de fichiers:: Définissez les types de fichiers à inclure dans chaque synchronisation : fichiers, répertoires, liens symboliques et liens physiques.
+
--

NOTE: Les liens physiques ne sont disponibles que pour les relations NFS à NFS non sécurisées.  Les utilisateurs seront limités à un processus de scanner et à une concurrence de scanner, et les analyses doivent être exécutées à partir d'un répertoire racine.

--
Exclure les extensions de fichiers:: Spécifiez l'expression régulière ou les extensions de fichier à exclure de la synchronisation en saisissant l'extension de fichier et en appuyant sur *Entrée*.  Par exemple, tapez _log_ ou _.log_ pour exclure les fichiers *.log.  Un séparateur n'est pas nécessaire pour plusieurs extensions.  La vidéo suivante fournit une courte démonstration :
+
--
.Exclure les extensions de fichier pour une relation de synchronisation
video::7f957dbf-9215-41ea-a705-b24c010b2212[panopto]

NOTE: Les expressions régulières, ou Regex, diffèrent des caractères génériques ou des expressions glob.  Cette fonctionnalité fonctionne *uniquement* avec les expressions régulières.

--
Exclure les répertoires:: Spécifiez un maximum de 15 expressions régulières ou répertoires à exclure de la synchronisation en saisissant leur nom ou le chemin complet du répertoire et en appuyant sur *Entrée*.  Les répertoires .copy-offload, .snapshot, ~snapshot sont exclus par défaut.
+
--

NOTE: Les expressions régulières, ou Regex, diffèrent des caractères génériques ou des expressions glob.  Cette fonctionnalité fonctionne *uniquement* avec les expressions régulières.

--
Taille du fichier:: Choisissez de synchroniser tous les fichiers quelle que soit leur taille ou uniquement les fichiers qui se trouvent dans une plage de taille spécifique.
Date de modification:: Sélectionnez tous les fichiers quelle que soit leur date de dernière modification, les fichiers modifiés après une date spécifique, avant une date spécifique ou entre une période donnée.
Date de création:: Lorsqu'un serveur SMB est la source, ce paramètre vous permet de synchroniser les fichiers créés après une date spécifique, avant une date spécifique ou entre une plage horaire spécifique.
ACL - Liste de contrôle d'accès:: Copiez uniquement les ACL, uniquement les fichiers ou les ACL et les fichiers à partir d'un serveur SMB en activant un paramètre lorsque vous créez une relation ou après avoir créé une relation.


. Sélectionnez *Enregistrer les paramètres*.


.Résultat
Copier et synchroniser modifie la relation de synchronisation avec les nouveaux paramètres.



== Supprimer les relations

Vous pouvez supprimer une relation de synchronisation si vous n'avez plus besoin de synchroniser les données entre la source et la cible.  Cette action ne supprime pas le groupe de courtiers de données (ni les instances individuelles de courtiers de données) et ne supprime pas les données de la cible.



=== Option 1 : Supprimer une seule relation de synchronisation

.Étapes
. Depuis le *Tableau de bord*, accédez à la relation de synchronisation et sélectionnezimage:icon-sync-action.png["Une capture d'écran du bouton qui vous permet d'effectuer des actions sur une relation de synchronisation"]
. Sélectionnez *Supprimer* puis sélectionnez à nouveau *Supprimer* pour confirmer.


.Résultat
Copier et synchroniser supprime la relation de synchronisation.



=== Option 2 : Supprimer plusieurs relations de synchronisation

.Étapes
. Depuis le *Tableau de bord*, accédez au bouton « Créer une nouvelle synchronisation » et sélectionnezimage:icon-sync-action.png["Une capture d'écran du bouton qui vous permet d'effectuer des actions sur une relation de synchronisation"]
. Sélectionnez les relations de synchronisation que vous souhaitez supprimer, sélectionnez *Supprimer*, puis sélectionnez à nouveau *Supprimer* pour confirmer.


.Résultat
Copier et synchroniser supprime les relations de synchronisation.
